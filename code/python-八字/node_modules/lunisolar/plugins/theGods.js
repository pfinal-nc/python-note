!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n="undefined"!=typeof globalThis?globalThis:n||self).lunisolarPluginTheGods=e()}(this,(function(){"use strict";var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])},n(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function t(n,e,t,r){var l,u=arguments.length,o=u<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(l=n[a])&&(o=(u<3?l(o):u>3?l(e,t,o):l(e,t))||o);return u>3&&o&&Object.defineProperty(e,t,o),o}function r(n,e,t,r){return new(t||(t=Promise))((function(l,u){function o(n){try{i(r.next(n))}catch(n){u(n)}}function a(n){try{i(r.throw(n))}catch(n){u(n)}}function i(n){var e;n.done?l(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(o,a)}i((r=r.apply(n,e||[])).next())}))}function l(n,e){var t,r,l,u,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,a[0]&&(o=0)),o;)try{if(t=1,r&&(l=2&a[0]?r.return:a[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,a[1])).done)return l;switch(r=0,l&&(a=[2&a[0],l.value]),a[0]){case 0:case 1:l=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(l=o.trys,(l=l.length>0&&l[l.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1],l=a;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(a);break}l[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(n,o)}catch(n){a=[6,n],r=0}finally{t=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}function u(n,e,t){if(t||2===arguments.length)for(var r,l=0,u=e.length;l<u;l++)!r&&l in e||(r||(r=Array.prototype.slice.call(e,0,l)),r[l]=e[l]);return n.concat(r||Array.prototype.slice.call(e))}var o,a="year gods",i="month gods",c="day gods",s="hour gods",h="this day gods",d="day of yellow-black god",f="hour of yellow-black god",v="duty god",g="year of long-life god",y="month of long-life god",m="day of long-life god",p="hour of long-life god",b="good act",B="good act 1",w="good act 2",G="good act 3",_="bad act",S="bad act 1",D="bad act 2",O="bad act 3",k=["月德","月德合","天德","天德合"],j=new Set(k),A=["天赦","天願"],P=["相日","月建","時德","六合","天吏","月令長生","官日","除日","執日","開日","滿日","民日","月破","危日","建日","月德","大會","守日","成日","定日","德"],x=["平日","收日","閉日","劫煞","災煞","月煞","月刑","月害","月厭","大時","天吏"],M={"平日":[[0,[11],["相日","時德","六合"]],[1,[6],["相日","六合","月刑"]],[2,[8],["相日","月害"]],[3,[2],["相日","月害","月刑"]],[3,[3,6,9],["天吏"]],[4,[1,4,7,10],["月煞"]],[4,[0],["天吏","月刑"]]],"收日":[[0,[2,8],["月令長生","六合","劫煞"]],[2,[5,11],["月令長生","劫煞"]],[2,[4,7],["月害"]],[3,[0,6,9],["大時"]],[3,[1,10],["月刑"]],[4,[3],["大時"]]],"閉日":[[3,[0,3,6,9],["王日"]],[3,[1,4,7,10],["官日","天吏"]],[4,[2,5,8,11],["月煞"]]],"劫煞":[[0,[2,8],["月令長生","六合","收日"]],[1,[1,4,7,10],["除日","相日"]],[2,[5,11],["月令長生","月害","收日"]],[3,[0,3,6,9],["執日"]]],"災煞":[[1,[2,5,8,10],["開日"]],[2,[1,4,7,10],["滿日","民日"]],[4,[0,6],["月破"]],[5,[0,6],["月厭"]]],"月煞":[[1,[3,9],["六合","危日"]],[3,[0,6],["月害","危日"]],[4,[2,5,8,11],["閉日"]],[4,[1,4,7,10],["平日"]]],"月刑":[[1,[5],["平日","六合","相日"]],[3,[2],["相日","月害","平日"]],[3,[4,9,11],["建日"]],[3,[1,10],["收日"]],[4,[0],["平日","天吏"]],[4,[3],["收日","大時"]],[4,[7,8],["月破"]],[4,[6],["月建","月厭","月德","大會"]]],"月害":[[2,[3,9],["守日","除日"]],[2,[1,7],["執日","大時"]],[2,[5,11],["月令長生","劫煞"]],[2,[8],["相日","平日"]],[3,[0,6],["月煞"]],[3,[4,10],["官日","閉日","天吏"]],[3,[2],["相日","平日","月刑"]]],"月厭":[[2,[2,8],["成日"]],[2,[1,7],["開日"]],[3,[4,10],["定日"]],[3,[5,11],["滿日"]],[4,[0],["月建","德","大會"]],[4,[6],["月建","月刑","德","大會"]],[5,[3,9],["月破","災煞"]]],"大時":[[0,[2,5,8,11],["除日","官日"]],[0,[4,10],["執日","六合"]],[2,[1,7],["執日","月害"]],[3,[0,6,9],["收日"]],[4,[3],["收日","月刑"]]],"天吏":[[2,[2,5,8,11],["危日"]],[3,[1,4,7,10],["閉日"]],[3,[3,6,9],["平日"]],[4,[0],["平日","月刑"]]]},Y=new Set(["y","m","d","h"]),L=new Set([24,54,48,18,51,15,27,21,45,57]),F=[2,1,0,11,10,9,8,7,6,5,4,3,2,1],T={name:"zh",theGods:{gods:{},acts:{},queryString:(o={},o[a]="年神",o[i]="月神",o[c]="日神",o[s]="時神",o[h]="本日神煞",o[d]="本日黃黑十二神",o[f]="此時黃黑十二神",o[v]="建除十二神",o[g]="年長生十二神",o[y]="月長生十二神",o[m]="日長生十二神",o[p]="時長生十二神",o[b]="宜",o[B]="宜1",o[w]="宜2",o[G]="宜3",o[_]="忌",o[S]="忌1",o[D]="忌2",o[O]="忌3",o)}},E=[[9],[5,9,7],[0,2,4],[1],[4,1,9],[2,6,4],[3,5],[5,3,1],[6,8,4],[7],[4,7,3],[8,0]],H={isUTC:!1,offset:0,changeAgeTerm:2,locales:{zh:{name:"zh",leap:"閏",lunarYearUnit:"年",lunarHourUnit:"時",bigMonth:"大",smallMonth:"小",weekdays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],weekdaysShort:["週日","週一","週二","週三","週四","週五","週六"],weekdaysMin:["日","一","二","三","四","五","六"],months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),lunarMonths:"正月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),lunarMonthsAlias:"正月_二月_三月_四月_五月_六月_七月_八月_九月_十月_冬月_腊月".split("_"),lunarDays:"初一_初二_初三_初四_初五_初六_初七_初八_初九_初十_十一_十二_十三_十四_十五_十六_十七_十八_十九_二十_廿一_廿二_廿三_廿四_廿五_廿六_廿七_廿八_廿九_三十".split("_"),numerals:"〇一二三四五六七八九十".split(""),constellationName:"白羊座_金牛座_雙子座_巨蟹座_狮子座_處女座_天秤座_天蝎座_射手座_摩羯座_水瓶座_雙魚座".split("_"),solarTerm:"小寒_大寒_立春_雨水_驚蟄_春分_清明_穀雨_立夏_小滿_芒種_夏至_小暑_大暑_立秋_處暑_白露_秋分_寒露_霜降_立冬_小雪_大雪_冬至".split("_"),seasonName:"春夏秋冬".split(""),stems:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],branchs:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],stemBranchSeparator:"",chineseZodiac:["鼠","牛","虎","兔","龍","蛇","馬","羊","猴","雞","狗","豬"],fiveElements:["木","火","土","金","水"],eightTrigram:"坤震坎兌艮離巽乾".split(""),moonPhase:{"朔":"朔","望":"望","弦":"弦","晦":"晦"},directions:["","北","西南","東","東南","中","西北","西","東北","南"],formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah點mm分",LLLL:"YYYY年M月D日ddddAh點mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiem:function(n,e){var t=100*n+e;return t<600?"凌晨":t<900?"早上":t<1100?"上午":t<1300?"中午":t<1800?"下午":"晚上"}}},lang:"zh"},I=function(n,e,t){return void 0===t&&(t=0),"month"===e?n.getMonthBuilder(t)[0]:n.char8[e]},W=function(n,e,t){var r=I(n,e,0);return t?r.branch.value%t:r.branch.value},N=function(n,e,t){var r=I(n,e,0);return t?r.stem.value%t:r.stem.value},R=function(n,e,t){var r=I(n,e,0).stem.trigram8.valueOf();return t?r%t:r},z=function(n,e){if((n+e)%2!=0)throw new Error("Invalid SB value");return n%10+(6-(e>>1)+(n>>1))%6*10};function C(n){return!isNaN(Number(n))}function V(n,e,t){if(t.has(n))return t.get(n);var r=e();return t.set(n,r),r}var q={stem:[10,"stems"],branch:[12,"branchs"],trigram8:[8,"eightTrigram"],element5:[5,"fiveElements"]},U=function(n,e,t,r){if("number"==typeof n)n%=q[e][0];else if("string"==typeof n){var l=r.locales[t][q[e][1]].indexOf(n);if(-1===l)throw new Error("Invalid ".concat(e," value"));n=l}return n};function J(n,e){void 0===e&&(e=!1),n=n.toLowerCase();var t={year:"y",month:"m",d:"d",h:"h"};return t.hasOwnProperty(n)?t[n]:Y.has(n)||!e?n:null}function Z(n){return X((function(e,t){return(W(e,null!=t?t:"month")+n)%12}),W)}function K(n){return X((function(e,t){return([0,11,10,9,8,7,6,5,4,3,2,1][W(e,null!=t?t:"month")]+n)%12}),W)}function Q(n){return X((function(e){return([1,0,11,10,9,8,7,6,5,4,3,2][e.getMonthBuilder(0)[0].branch.value]+n+12)%12}),W)}function X(n,e,t){return void 0===t&&(t="="),function(r,l,u){void 0===u&&(u=null);var o=n(r,l);if(!u)return o;if(null===o||!1===o)return!1;var a=e(r,u);return"includes"===t&&Array.isArray(o)?1===o.length?o[0]===a:o.includes(a):o===a}}function $(n,e,t,r,l){return void 0===r&&(r="month"),X((function(l,u){return Number(n[e(l,null!=u?u:r,t)])}),l||e)}var nn=function(n,e){for(var t=0,r=e;t<r.length;t++){var l=r[t];n.delete(l)}},en={locales:{}},tn=function(n,e,t){void 0===e&&(e="zh");var r=en.locales[e];return r?function(n,e){for(var t=e.split("."),r=n,l=e,u=function(n){return("string"==typeof n||"number"==typeof n||"function"==typeof n)&&(l=n,!0)};t.length>=0&&!u(r)&&0!==t.length;){var o=t.shift();if(void 0===o)return"";if(Array.isArray(r)){var a=Number(o);if(isNaN(a)||a>=r.length)return"";r=r[a],l=r}else{if(!r.hasOwnProperty(o))return t[t.length-1]||o;r=r[o]}}return l}(r,t?"theGods.".concat(t,".").concat(n):n):n},rn=["青龍","明堂","天刑","朱雀","金匱","天德","白虎","玉堂","天牢","玄武","司命","勾陳","寶光"],ln={"青龍":[null,null,1],"明堂":[null,null,1],"天刑":[null,null,-1],"朱雀":[null,null,-1],"金匱":[null,null,1],"天德":[null,null,1],"白虎":[null,null,-1],"玉堂":[null,null,1],"天牢":[null,null,-1],"玄武":[null,null,-1],"司命":[null,null,1],"勾陳":[null,null,-1],"寶光":[null,null,1]},un=[8,10,0,2,4,6],on=function(n,e){return 5===n&&"hour"===e?"寶光":rn[n]},an=function(n){return ln.hasOwnProperty(n)?ln[n]:null};var cn=["建","除","滿","平","定","執","破","危","成","收","開","閉"],sn={"建":["施恩封拜 詔命公卿 招賢 舉正直 行幸 遣使 上官赴任 臨政親民 訓兵 出師".split(" "),["結姻親","開倉庫"],null,-1],"除":["解除 沐浴 整容 剃頭 整手足甲 求醫療病 掃舍宇 施恩封拜 舉正直 行幸 遣使 上官赴任 臨政親民 安撫邊境 選將訓兵 出師".split(" "),null,null,1],"滿":["進人口 裁製 修倉庫 經絡 開市 立券 交易 納財 開倉庫 出貨財 補垣塞穴 祭祀 祈福 上冊進表章 慶賜 賞賀 宴會 修宮室 繕城郭 ".split(" "),"施恩封拜 詔命公卿 招賢 舉正直 上官赴任 臨政親民 結婚姻 納采問名 求醫療病".split(" "),{actsFilter:function(n,e){var t=W(n,"month");return[2,8].includes(t)&&e.has("守日")||[0,3,6,9].includes(t)&&e.has("相日")||["月德","天德合","月德合","月恩","四相"].some((function(n){return e.has(n)}))?{replace:{bad:[]}}:null}},-1],"平":[["修飾垣墻","平治道涂"],"祈福 求嗣 上冊進表章 頒詔 施恩封拜 詔命公卿 招賢 舉正直 宣政事 布政事 慶賜 賞賀 宴會 行幸 遣使 安撫邊境 選將訓兵 出師 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 進人口 般移 安床 解除 求醫療病 裁製 營建宮室 修宮室 繕城郭 興造動土 豎柱上梁 修倉庫  鼓鑄 經絡 醞釀 開市 立券 交易 納財 開倉庫 出貨財 修置產室 開渠穿井 栽種 收養 納畜 破土 安葬 啟攢".split(" "),null,-1],"定":[["冠帶","運謀算","畫計策"],["上表章","陳詞訟","戰鬥","征伐","求醫療病","安置產室","經營","栽種"],null,1],"執":[["捕捉"],null,null,1],"破":[["求醫療病","破屋壞垣"],null,null,-1],"危":[["安撫邊境","選將訓兵","安床"],null,null,1],"成":["入學 安撫邊境 般移 筑堤防 開市 施恩封拜 舉正直 慶賜 賞賀 宴會 行幸 遣使 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 求醫療病".split(" "),null,null,1],"收":[["進人口","納財","捕捉","納畜"],"祈福 求嗣 上冊進表章 頒詔 施恩封拜 詔命公卿 招賢 舉正直 宣政事 布政事 慶賜 賞賀 宴會 冠帶 行幸 遣使 安撫邊境 選將訓兵 出師 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 般移 安床 解除 求醫療病 裁製 營建宮室 修宮室 繕城郭 興造動土 豎柱上梁 修倉庫  鼓鑄 經絡 醞釀 開市 立券 交易 開倉庫 出貨財 修置產室 開渠穿井 破土 安葬 啟攢".split(" "),{actsFilter:function(n,e){return["月恩","四相","時德"].some((function(n){return e.has(n)}))?{add:{good:["修倉庫"]}}:null}},-1],"開":["祭祀 祈福 求嗣 上冊進表章 頒詔  覃恩 肆赦 施恩封拜 詔命公卿 招賢 舉正直 施恩惠 恤孤煢 宣政事 行惠愛 雪冤枉 緩刑獄 慶賜 賞賀 宴會 入學 行幸 遣使 上官赴任 臨政親民 般移 解除 求醫療病 裁製 修宮室 繕城郭 興造動土 豎柱上梁 開市 修置產室 開渠穿井 安碓磑 栽種 牧養".split(" "),["伐木","畋獵","取魚","破土","安葬","啟攢"],null,1],"閉":[["筑堤防","補垣塞穴"],"上冊進表章 頒詔 施恩封拜 詔命公卿 招賢 舉正直 宣政事 布政事 慶賜 賞賀 宴會 冠帶 行幸 遣使 出師 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 進人口 般移 安床 求醫療病 營建宮室 修宮室 興造動土 豎柱上梁  開市 開倉庫 出貨財 修置產室 開渠穿井 針刺 療目".split(" "),null,-1]},hn=function(n){var e=(W(n,"day")+12-W(n,"month"))%12;return[e,cn[e]]},dn=["長生","沐浴","冠帶","臨官","帝旺","衰","病","死","墓","絕","胎","養"],fn=function(n,e){void 0===e&&(e="day");var t=N(n,e),r=W(n,e),l=(12+(t%2==1?12-r:r)+[1,6,10,9,10,9,7,0,4,3][t])%12;return[l,dn[l]]},vn={"日祿":[$([2,3,5,6,5,6,8,9,11,0],N,0,"day",W),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"天乙貴人":[X((function(n,e){return void 0===e&&(e="day"),[[7,1],[8,0],[9,11],[11,9],[1,7],[0,8],[1,7],[2,6],[3,5],[5,3]][N(n,e)]}),W,"includes"),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"喜神":[$([2,10,8,6,4],N,5,"day",W),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"天官貴人":[X((function(n,e){return void 0===e&&(e="day"),[[9],[8],[0],[11],[3],[2],[6],[5],[7,1],[4,10]][N(n,e)]}),W,"includes"),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"福星貴人":[X((function(n,e){return void 0===e&&(e="day"),[[2],[1,11],[0,10],[9],[8],[7],[6],[5],[4],[3]][N(n,e)]}),W,"includes"),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"五不遇":[X((function(n,e){return void 0===e&&(e="day"),[6,7,8,9,0,1,2,3,4,5][N(n,e)]}),N),null,null,-1,{showGB:!0,checkBy:"stem",isDay60HourGod:!0}],"路空":[X((function(n,e){return void 0===e&&(e="day"),[[8,9],[6,7],[4,5],[2,3],[0,1,10,11]][N(n,e,5)]}),W,"includes"),null,null,-1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"日建":[X((function(n,e){return void 0===e&&(e="day"),W(n,e)}),W),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"日合":[X((function(n,e){return void 0===e&&(e="day"),[1,0,11,10,9,8,7,6,5,4,3,2][W(n,e)]}),W),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"日馬":[X((function(n,e){return void 0===e&&(e="day"),[2,11,8,5][W(n,e,4)]}),W),null,null,1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"日破":[X((function(n,e){return void 0===e&&(e="day"),(W(n,e)+6)%12}),W),null,null,-1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"日害":[X((function(n,e){return void 0===e&&(e="day"),[7,6,5,4,3,2,1,0,11,10,9,8][W(n,e)]}),W),null,null,-1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"日刑":[X((function(n,e){return void 0===e&&(e="day"),[3,10,5,0,4,8,6,1,2,9,7,11][W(n,e)]}),W),null,null,-1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}],"貴登天門":[X((function(n,e){void 0===e&&(e="day");return[[[5,11],[4,10],[3,9],null,null,null,null,null,[9],[8,2],[7,1],[6,0]],[[4,0],[3,11],[10],[9],null,null,[10],[9],[8],[7,3],[6,2],[5,1]],[[1],[0],[11],[10],null,[10],[9],[8],[7],[6],[5,3],[4,2]],[[3],[2],[1],[0],[9,11],[8],[7],[6],[5],[4],[3],null],[null,null,[9,3],[8,2],[7,1],[6,0],[5,11],[4,10],[3,9],null,null,null],[null,[3],[2],[9,1],[8,0],[7,11],[6,10],[5],[4],[3],null,null],[null,null,[9,3],[8,2],[7,1],[6,0],[5,11],[4,10],[3,9],null,null,null],[null,null,[8],[7,3],[6,2],[5,1],[4,0],[3,11],[10],[9],null,null],[null,[8],[7],[6],[4,2],[3,1],[2,0],[11],[10],[9],null],[[7,9],[6,8],[5],[4],[3],[2],null,[2],[1],[0],[9,11],[8,10]]][N(n,e)][n.getMonthBuilder(1)[0].branch.value]}),W,"includes"),null,null,1,{showGB:!0,checkBy:"branch"}],"九醜":[X((function(n,e){return void 0===e&&(e="day"),L.has(n.char8.day.value)?F[(n.getMonthBuilder(1)[0].branch.value+12-W(n,e))%12]:null}),W),null,null,-1,{showGB:!0,checkBy:"branch"}],"旬空":[X((function(n,e){return void 0===e&&(e="day"),[[10,11],[8,9],[6,7],[4,5],[2,3],[0,1]][I(n,e,0).value/10>>0]}),W,"includes"),null,null,-1,{showGB:!0,checkBy:"branch",isDay60HourGod:!0}]},gn="祈福 求嗣",yn="祭祀 祈福 求嗣",mn="覃恩 肆赦",pn="施恩封拜 詔命公卿",bn="".concat(yn," 上冊進表章 頒詔 ").concat(mn," ").concat(pn),Bn="招賢 舉正直",wn="施恩惠 恤孤煢",Gn="宣政事 布政事",_n="雪冤枉 緩刑獄",Sn="慶賜 賞賀 宴會",Dn="".concat(Bn," ").concat(wn," ").concat(Gn," ").concat(_n," ").concat(Sn),On="行幸 遣使",kn="安撫邊境 選將訓兵 出師",jn="上官赴任 臨政親民",An="".concat(kn," ").concat(jn),Pn="結婚姻 納采問名",xn="結婚姻 納采問名 嫁娶",Mn="結婚姻 納采問名 嫁娶 進人口",Yn="般移 安床",Ln="整容 剃頭 整手足甲",Fn="解除 整容 剃頭 整手足甲",Tn="求醫療病",En="興造動土 豎柱上梁",Hn="營建宮室 修宮室 繕城郭 筑堤防 興造動土 豎柱上梁 修倉庫",In="經絡 醞釀",Wn="開倉庫 出貨財",Nn="開市 立券 交易 納財 開倉庫 出貨財",Rn="修飾垣墻 破屋壞垣",zn="栽種 牧養 納畜",Cn="破土 安葬 啟攢",Vn="捕捉 畋獵 取漁",qn={a001:gn,a001a:yn,a001b:"祈福 求嗣 上冊進表章 施恩封拜 詔命公卿",a002:mn,a003:pn,a003a:bn,a004:Bn,a005:wn,a006:Gn,a007:_n,a007a:"行惠愛 雪冤枉 緩刑獄",a008:Sn,a008a:Dn,a009:On,a010:kn,a011:jn,a011a:An,a011b:"襲爵受封 ".concat(jn),a012:Pn,a012a:xn,a012b:Mn,a013:Yn,a013a:"般移 遠回",a014:Ln,a014a:Fn,a015:Tn,a016:"營建宮室 修宮室 繕城郭",a017:En,a017a:"".concat(En," 修倉庫"),a017b:Hn,a018:In,a019:"開市 立券 交易",a019a:"開市 立券 交易 納財",a020:Wn,a020a:Nn,a020b:"修倉庫 開市 立券 交易 納財 開倉庫 出貨財",a021:"修置產室",a022:"破屋壞垣 開渠穿井",a023:Rn,a024:zn,a025:"破土 安葬",a025a:Cn,a026:"取漁 乘船渡水",a027:Vn},Un="祭祀 祈福 求嗣 上冊受封 上表章 襲爵受封 會親友 入學 冠帶 出行 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 進人口 移徙 遠回 安床 解除 沐浴 剃頭 整手足甲 求醫療病 療目 針刺 裁衣 筑堤防 修造動土 豎柱上梁 修倉庫 鼓鑄 苫蓋 經絡 醞釀 開市 立券 交易 納財 開倉庫 出貨財 修置產室 開渠穿井 安碓磑 補垣塞穴 掃舍宇 修飾垣墻 平治道涂 破屋壞垣 伐木 捕捉 畋獵 取魚 乘船渡水 栽種 牧養 納畜 破土 安葬 啟攢".split(" "),Jn="祭祀 祈福 求嗣 上刪進表章 頒詔 覃恩 肆赦 施恩封拜 詔命公卿 招賢 舉正直 施恩惠 恤孤煢 宣政事 布政事 行惠愛 雪冤枉 緩刑獄 慶幸 賞賀 宴會 入學 冠帶 行幸 遣使 安撫邊境 選將訓兵 出師 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 進人口 般移 安床 解除 沐浴 剃頭 整手足甲 求醫療病 製裁 營建宮室 修宮室 繕城郭 筑堤防 興造動土 豎柱上梁 經絡 開市 立券 交易 納財 修置產室 開渠穿井 安碓磑 補垣 掃舍宇 修飾垣墻 平治道涂 伐木 捕捉 畋獵 取魚 栽種 牧養 納畜".split(" "),Zn="祭祀 上表章 上官 入學 冠帶 結婚姻 會親友 嫁娶 進人口 出行 移徙 安床 沐浴 剃頭 療病 裁衣 修造動土 豎柱上梁 經絡 開市 立券 交易 納財 修置產室 開渠穿井 安碓磑 掃舍宇 平治道涂 破屋壞垣 伐木 捕捉 畋獵 栽種 牧養 破土 安葬 啟攢".split(" "),Kn="祭祀 祈福 求嗣 上刪進表章 上表章 頒詔 覃恩 肆赦 施恩封拜 詔命公卿 招賢 舉正直 施恩惠 恤孤煢 宣政事 布政事 行惠愛 雪冤枉 緩刑獄 慶幸 賞賀 宴會 入學 冠帶 行幸 遣使 安撫邊境 選將訓兵 出師 上官赴任 臨政親民 結婚姻 納采問名 嫁娶 進人口 般移 遠回 安床 解除 沐浴 整容 剃頭 整手足甲 求醫療病 療目 針刺 製裁 營建宮室 修宮室 繕城郭 筑堤防 興造動土 豎柱上梁 修倉庫 鼓鑄 苫蓋 經絡 醞釀 開市 立券 交易 納財 開倉庫 出貨財 修置產室 開渠穿井 安碓磑 補垣塞穴 掃舍宇 修飾垣墻 平治道涂 伐木 捕捉 畋獵 取魚 乘船渡水 栽種 牧養 納畜 破土 安葬 啟攢",Qn=Kn.split(" ");function Xn(n,e){void 0===e&&(e=!1);for(var t="",r=function(n){var e="a"+(C(n)?("00"+n).slice(-3):n),r=t?" ":"";qn.hasOwnProperty(e)?t=r+qn[e]:"number"!=typeof n&&(t=r+n)},l=0,u=n;l<u.length;l++){var o=u[l];if("string"==typeof o&&!C(o)&&o.indexOf("-")){var a=o.split("-");if(2===a.length&&C(a[0])&&C(a[1]))for(var i=Number(a[0]);i<=Number(a[1]);i++)r(i)}else r(o)}return e?t:t.split(" ")}var $n=Xn(["a003a",4,5,"宣政事","007a","8-11","012a","般移 解除",15,"裁製 營建宮室 繕城郭","017a",24,"栽種"],!1),ne=Xn(["a003a",4,5,"宣政事","007a","8-11","012b","般移 裁製 營建宮室 繕城郭","017a",18,24,"栽種"],!1),ee=("".concat(yn," 施恩封拜 舉正直 ").concat(Sn," ").concat(On," ")+"".concat(jn," ").concat(Pn," 般移 解除 ")+"求醫療病 裁製 修宮室 繕城郭 ".concat(En," 納財 ").concat(Wn," 栽種 牧養")).split(" "),te="".concat(gn," 上冊進表章 頒詔 ").concat(pn," ")+"".concat(Bn," ").concat(Gn," ").concat(Sn," 冠帶 ").concat(On," ")+"".concat(An," ").concat(xn," ").concat(Yn," ")+"".concat(Fn," ")+"".concat(Tn," 裁製 ").concat(Hn," ")+"鼓鑄 ".concat(In," ").concat(Nn," 修置產室 開渠穿井 ")+"安碓磑 掃舍宇 ".concat(Rn," ")+"".concat(zn," ").concat(Cn),re=te.split(" "),le="".concat(te," 進人口 遠回 平治道涂 伐木 修筑園圃").split(" ").filter((function(n){return"掃舍宇"!=n})),ue=("祈福 求嗣 上冊進表章 施恩封拜 詔命公卿 "+"".concat(Bn," 冠帶 ").concat(On," ")+"".concat(An," ").concat(Mn," ").concat(Yn," ")+"解除 "+"求醫療病 ".concat(Hn," ")+"".concat(Nn," 修置產室 ")+"".concat(zn)).split(" "),oe=Xn(["017b",21,"開渠穿井 安碓磑 補垣塞穴 修飾垣墻 平治道涂 破屋壞垣 栽種 破土"],!1),ae="上冊進表章 頒詔 詔命公卿 招賢 宣政事 ".concat(On," ").concat(An," 嫁娶 進人口 般移 ").concat(Tn," ").concat(Vn).split(" "),ie=function(n,e){e=null!=e?e:Kn.split(" ");var t=new Set(n.join(" ").split(" "));return e.filter((function(n){return!t.has(n)}))}("祈福 解除 沐浴 ".concat(Ln," 補垣塞穴 掃舍宇 修飾垣墻 平治道涂 破屋壞垣").split(" ")),ce=Xn([10],!1),se=Xn([10,15],!1);function he(n,e,t){e[0];var r=e[1],l=t.acts,o=t.mdsbActs,a=t.gods,i=t.signGods,c=new Set(o),s=l.good,h=l.bad;if(s.has("宣政事")&&s.has("布政事")&&s.delete("布政事"),s.has("營建宮室")&&s.has("修宮室")&&s.delete("修宮室"),o.length>0)for(var d=0,f=o;d<f.length;d++){var v=f[d];s.delete(v),h.add(v)}u(u(u([],k,!0),A,!0),["月恩","四相","时德"],!1).some((function(n){return a.has(n)}))&&["進人口","安床","經絡","醞釀","開市","立券","交易","納財","開倉庫","出貨財"].forEach((function(n){c.has(n)||r>1||!h.has(n)||h.delete(n)}));var g=n.lsr.char8.day.branch.value,y=n.lsr.char8.day.stem.value;(a.has("天狗")||2===g)&&(h.add("祭祀"),s.delete("祭祀"),s.delete("祈福"),s.delete("求嗣")),3===g&&(h.add("穿井"),s.delete("穿井"),s.delete("開渠")),8===y&&(h.add("開渠"),s.delete("開渠"),s.delete("穿井")),5===g&&(h.add("出行"),s.delete("出行"),s.delete("出師"),s.delete("遣使")),9===g&&(h.add("宴會"),s.delete("宴會"),s.delete("慶賜"),s.delete("賞賀")),3===y&&(h.add("剃頭"),s.delete("剃頭"),s.delete("整容")),1!==r||h.has("祈福")||c.has("求嗣")||h.delete("求嗣"),["詔命公卿","招賢"].some((function(n){return h.has(n)}))&&["施恩封拜","舉正直","襲爵受封"].forEach((function(n){return s.delete(n)})),["施恩封拜","舉正直","襲爵受封"].some((function(n){return h.has(n)}))&&["詔命公卿","招賢"].forEach((function(n){return s.delete(n)})),s.has("宣政事")&&a.has("往亡")&&(s.delete("宣政事"),s.add("布政事")),a.has("月厭")&&(["行幸","上官赴任"].forEach((function(n){s.delete(n),h.add(n)})),["頒詔","施恩封拜","詔命公卿","招賢","舉正直"].forEach((function(n){s.delete(n)})),s.has("宣政事")&&(s.delete("宣政事"),s.add("布政事"))),1===r&&(h.has("結婚姻")||["冠帶","納采問名","嫁娶","進人口"].forEach((function(n){c.has(n)||h.delete(n)})),h.has("嫁娶")||["冠帶","結婚姻","納采問名","進人口","般移","安床"].forEach((function(n){c.has(n)||a.has("不將")||h.delete(n)})),(9===y||["厭對","八專","四忌","四窮"].some((function(n){return a.has(n)})))&&h.add("嫁娶"),h.has("般移")||c.has("安床")||h.delete("安床"),h.has("安床")||c.has("般移")||h.delete("般移"),h.has("解除")||Xn([14],!1).forEach((function(n){c.has(n)||h.delete(n)})),h.has("修造動土")||h.has("豎柱上梁")||["修宮室","繕城郭","筑堤防","鼓鑄","苫蓋","修置產室","開渠穿井","安碓磑","補垣塞穴","修鉓垣墻","平治道涂","破屋壞垣"].forEach((function(n){c.has(n)||h.delete(n)})),h.has("開市")&&h.has("納財")&&(h.has("立券")||h.has("交易"))||Xn(["019a"]).forEach((function(n){h.delete(n)})),["開市","立券","交易"].every((function(n){return!h.has(n)}))&&["開倉庫","出貨財"].forEach((function(n){h.delete(n)})),h.has("牧養")||h.delete("納畜"),h.has("納畜")||h.delete("牧養"),s.has("安葬")&&h.delete("啟攢"),s.has("啟攢")&&h.delete("安葬")),["土符","土府","地囊"].some((function(n){return s.has(n)}))&&h.has("補垣塞穴")&&s.delete("補垣塞穴"),i.has("開日")&&["破土","安葬","啟攢"].forEach((function(n){s.delete(n),a.has("四忌")||h.delete(n)})),(a.has("四忌")||a.has("四窮"))&&(h.add("安葬"),s.delete("安葬"),(a.has("鳴吠")||a.has("鳴吠對"))&&(s.delete("破土"),s.delete("啟攢"))),(a.has("歲薄")||a.has("逐陣"))&&le.forEach((function(n){s.delete(n)})),function(n,e,t){[null,10,null,32,null,0,44,16,27,0,null,0][n.lunar.month]===n.char8.day.value&&(k.some((function(n){return e.has(n)}))||A.some((function(n){return e.has})))&&(t.bad=new Set)}(n.lsr,a,l)}var de={"歲德":[$("06284",N,5,"year"),null,null,8,{showGB:!0}],"歲德合":[$("51739",N,5,"year"),null,null,8,{showGB:!0}],"歲祿":[$([2,3,5,6,5,6,8,9,11,0],N,0,"year",W),null,null,8,{showGB:!0}],"陽貴":[$([7,8,9,11,1,0,1,2,3,5],N,0,"year",W),null,null,8],"陰貴":[$([1,0,11,9,7,8,7,6,5,3],N,0,"year",W),null,null,8],"金神":[X((function(n,e){return[[6,7,8,9],[4,5],[2,3,6,7,0,1],[2,3,10,11],[8,9,0,1]][N(n,null!=e?e:"year",5)]}),W,"includes"),null,Xn(["安撫邊境 出師 上官赴任 嫁娶","013a","16-17"],!1),-8],"破敗五鬼":[X((function(n,e){return void 0===e&&(e="year"),[6,4,0,1,5,2,3,7,6,4][N(n,e)]}),R),null,Xn(["020a"],!1),-8],"陰府太歲":[X((function(n,e){return void 0===e&&(e="year"),[[2,6],[3,7],[4,0],[7,5],[0,1]][N(n,e,5)]}),R,"includes"),null,null,-8],"太歲":[Z(0),null,null,-8],"太陽":[Z(1),null,null,8],"喪門":[Z(2),null,null,-8],"太陰":[Z(3),null,Xn(["017b"],!1),-8],"官符":[Z(4),null,null,8],"支德":[Z(5),Xn(["017b"],!1),null,8],"歲破":[Z(6),null,Xn([17,"嫁娶","013a"]),-8,{alias:["大耗"]}],"龍德":[Z(7),null,null,8],"白虎":[Z(8),null,null,-8],"福德":[Z(9),null,null,8],"吊客":[Z(10),null,Xn([16,17,"求醫醫療病"]),-8],"病符":[Z(11),null,null,-8],"神后":[K(0),null,null,8],"功曹":[K(2),null,null,8],"天罡":[K(4),null,null,-8],"勝光":[K(6),null,null,8],"傳送":[K(8),null,null,8],"河魁":[K(10),null,null,-8],"六害":[K(7),null,null,-8],"五鬼":[K(4),null,null,-8],"歲馬":[$([2,11,8,5],W,4,"year"),null,null,8],"歲刑":[$([3,10,5,0,4,8,6,1,2,9,7,11],W,0,"year"),null,null,-8],"歲煞":[$([7,4,1,10],W,4,"year"),null,null,-8],"伏兵":[$([2,0,8,6],W,4,"year",N),null,Xn([10,16,"017a"],!1),-8],"大禍":[$([3,1,9,7],W,4,"year",N),null,Xn([10,16,"017a"],!1),-8],"坐煞":[X((function(n){return[[2,3],[0,1],[8,9],[6,7]][W(n,"year")%4]}),N,"includes"),null,null,-8],"向煞":[X((function(n){return[[8,9],[6,7],[2,3],[0,1]][W(n,"year")%4]}),N,"includes"),null,null,-8],"天官符":[$([11,8,5,2],W,4,"year"),null,null,8],"大煞":[$([0,9,6,3],W,4,"year"),null,Xn([10],!1),-8,{meetDeStillBad:!0,meetWishStillBad:!0}],"黃幡":[$([4,1,10,7],W,4,"year"),null,Xn(["嫁娶","019a"]),-8],"豹尾":[$([10,7,4,1],W,4,"year"),null,Xn(["16-17","嫁娶","納畜"]),8],"灸退":[$([3,0,9,6],W,4,"year"),null,null,-8],"飛廉":[$([8,9,10,5,6,7,2,3,4,11,0,1],W,0,"year"),null,Xn([16,17,"嫁娶 般移 破土"]),-8]},fe={"畜官":u([],de.官符,!0),"死符":[de.支德[0],null,null,-8],"小耗":[de.支德[0],null,Xn(["020b"]),-8,{actsFilter:function(n,e){var t=W(n,"month");return k.some((function(n){return e.has(n)}))?{replace:{bad:[]}}:[0,3,6,9].includes(t)&&e.has("劫煞")?{meetDeStillBad:!0}:null}}]},ve=Object.assign({},de,fe),ge=function(){function n(n,e){this.value=-1,this._config={lang:H.lang},e&&(this._config=Object.assign({},this._config,e)),this.value=n%8}return n.getNames=function(n){return n=n||H.lang,u([],H.locales[n].eightTrigram,!0)},n.create=function(e,t){var r=(null==t?void 0:t.lang)||H.lang;e=U(e,"trigram8",r,H);var l="".concat(e,":").concat(r);if(n.instances.has(l))return n.instances.get(l);var u=new n(e,t);return n.instances.set(l,u),u},Object.defineProperty(n.prototype,"name",{get:function(){return H.locales[this._config.lang].eightTrigram[this.value]},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.name},n.prototype.valueOf=function(){return this.value},n.instances=new Map,n}(),ye=function(){function n(e,t){if(this.value=-1,this._config={lang:H.lang},e instanceof n)return e;t&&(this._config=Object.assign({},this._config,t)),this.value=U(e,"element5",this._config.lang,H)}return n.getNames=function(n){return n=n||H.lang,u([],H.locales[n].fiveElements,!0)},n.create=function(e,t){if(e instanceof n)return e;var r=(null==t?void 0:t.lang)||H.lang;e=U(e,"element5",r,H);var l="".concat(e,":").concat(r);if(n.instances.has(l))return n.instances.get(l);var u=new n(e,t);return n.instances.set(l,u),u},Object.defineProperty(n.prototype,"name",{get:function(){return-1===this.value?"":H.locales[this._config.lang].fiveElements[this.value]},enumerable:!1,configurable:!0}),n.prototype.generating=function(){var e=(this.value+1)%5;return n.create(e,this._config)},n.prototype.overcoming=function(){var e=(this.value+2)%5;return n.create(e,this._config)},n.prototype.weakening=function(){var e=(this.value+4)%5;return n.create(e,this._config)},n.prototype.counteracting=function(){var e=(this.value+3)%5;return n.create(e,this._config)},n.prototype.toString=function(){return-1===this.value?"Invalid five-element value":this.name},n.prototype.valueOf=function(){return this.value},n.instances=new Map,n}();function me(n,e){return void 0===e&&(e=!1),function(t,r,l){var o=void 0===l.value?l.get:l.value;l[void 0===l.value?"get":"value"]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>0&&e){var l=JSON.stringify(t);n+=l}if(this.cache.has(n))return this.cache.get(n);var a=o.call.apply(o,u([this],t,!1));return this.cache.set(n,a),a}}}var pe=function(){this.cache=new Map},be=function(n){function r(e,t){var l=n.call(this)||this;return l.value=-1,l._config={lang:H.lang},e instanceof r?e:(t&&(l._config=Object.assign({},l._config,t)),l.value=U(e,"branch",l._config.lang,H),l)}return e(r,n),r.getNames=function(n){return n=n||H.lang,u([],H.locales[n].branchs,!0)},r.create=function(n,e){if(n instanceof r)return n;var t=(null==e?void 0:e.lang)||H.lang;n=U(n,"branch",t,H);var l="".concat(n,":").concat(t);if(r.instances.has(l))return r.instances.get(l);var u=new r(n,e);return r.instances.set(l,u),u},Object.defineProperty(r.prototype,"name",{get:function(){return H.locales[this._config.lang].branchs[this.value]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hiddenStems",{get:function(){return E[this.value].map((function(n){return new Be(n)}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"e5",{get:function(){var n=Math.floor((this.value+10)/3)%4;return(this.value+10)%3==2?ye.create(2,this._config):ye.create(n<2?n:n+1,this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"triad",{get:function(){return[r.create((this.value+4)%12,this._config),r.create((this.value+8)%12,this._config)]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"triadE5",{get:function(){return ye.create([4,0,1,3][this.value%4],this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"group6",{get:function(){return r.create((13-this.value)%12,this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"group6E5",{get:function(){return ye.create((n=this.value,e=[2,0,1,3,4,2],(n=0===n?12:n)<7?e[n-1]:e[12-n]),this._config);var n,e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"punishing",{get:function(){return r.create([3,10,5,0,4,8,6,1,2,9,7,11][this.value],this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"punishBy",{get:function(){return r.create([3,7,8,0,4,2,6,10,5,9,1,11][this.value],this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"conflict",{get:function(){return r.create((this.value+6)%12,this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"destroying",{get:function(){return r.create([9,4,11,6,1,8,3,10,5,0,7,2][this.value],this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"harming",{get:function(){var n=this.value>7?19-this.value:7-this.value;return r.create(n,this._config)},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return this.name},r.prototype.valueOf=function(){return this.value},r.instances=new Map,t([me("branch:hiddenStems")],r.prototype,"hiddenStems",null),t([me("branch:e5")],r.prototype,"e5",null),t([me("branch:punishing")],r.prototype,"punishing",null),t([me("branch:punishBy")],r.prototype,"punishBy",null),t([me("branch:conflict")],r.prototype,"conflict",null),t([me("branch:destroying")],r.prototype,"destroying",null),t([me("branch:harming")],r.prototype,"harming",null),r}(pe),Be=function(n){function r(e,t){var l=n.call(this)||this;return l.value=-1,l._config={lang:H.lang},e instanceof r?e:(t&&(l._config=Object.assign({},l._config,t)),l.value=U(e,"stem",l._config.lang,H),l)}return e(r,n),r.getNames=function(n){return n=n||H.lang,u([],H.locales[n].stems,!0)},r.create=function(n,e){if(n instanceof r)return n;var t=(null==e?void 0:e.lang)||H.lang;n=U(n,"stem",t,H);var l="".concat(n,":").concat(t);if(r.instances.has(l))return r.instances.get(l);var u=new r(n,e);return r.instances.set(l,u),u},Object.defineProperty(r.prototype,"name",{get:function(){return H.locales[this._config.lang].stems[this.value]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"branchs",{get:function(){var n=this;return H.locales[this._config.lang].branchs.filter((function(e,t){return t%2==n.value%2})).map((function(e){return be.create(e,n._config)}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"e5",{get:function(){return ye.create(Math.floor(this.value/2),this._config)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trigram8",{get:function(){return ge.create([7,0,4,3,2,5,1,5,7,0][this.value],this._config)},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return this.name},r.prototype.valueOf=function(){return this.value},r.instances=new Map,t([me("stem:branchs")],r.prototype,"branchs",null),t([me("stem:e5")],r.prototype,"e5",null),r}(pe);!function(){function n(n,e,t){if(this.value=-1,this._config={lang:H.lang},t&&(this._config=Object.assign({},this._config,t)),"number"==typeof e||"string"==typeof e||e instanceof be){this.stem=Be.create(n,this._config),this.branch=be.create(e,this._config);var r=this.stem.valueOf(),l=this.branch.valueOf();this.value=z(r,l)}else{if("number"!=typeof n)throw new Error("Invalid SB value");this.value=n%60;r=this.value%10,l=this.value%12;this.stem=Be.create(r,this._config),this.branch=be.create(l,this._config)}}n.getNames=function(n){n=n||H.lang;var e=H.locales[n];return new Array(60).fill("").map((function(n,t){var r,l=t%10,u=t%12;return e.stems[l]+(null!==(r=null==e?void 0:e.stemBranchSeparator)&&void 0!==r?r:"")+e.branchs[u]}))},n.create=function(e,t){if(e instanceof n)return e;var r=(null==t?void 0:t.lang)||H.lang,l="".concat(e,":").concat(r);if(n.instances.has(l))return n.instances.get(l);var u=new n(e,void 0,t);return n.instances.set(l,u),u},Object.defineProperty(n.prototype,"missing",{get:function(){var n=2*(5-Math.floor(this.value/10));return[be.create(n,this._config),be.create(n+1,this._config)]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){var n,e=H.locales[this._config.lang];return"".concat(this.stem).concat(null!==(n=null==e?void 0:e.stemBranchSeparator)&&void 0!==n?n:"").concat(this.branch)},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.name},n.prototype.valueOf=function(){return this.value},n.instances=new Map}();var we=new Map,Ge=function(n,e){void 0===e&&(e="zh");for(var t=function(n){return[0,22,20,18,16,14,12,10,8,6,4,2][n]}(n),r=(t+12)%24,l=function(n){void 0===n&&(n="zh");var e="direction24List:".concat(n);if(we.has(e))return we.get(e);var t={lang:n},r=[be.create(0,t),Be.create(9,t),be.create(1,t),ge.create(4,t),be.create(2,t),Be.create(0,t),be.create(3,t),Be.create(1,t),be.create(4,t),ge.create(6,t),be.create(5,t),Be.create(2,t),be.create(6,t),Be.create(3,t),be.create(7,t),ge.create(0,t),be.create(8,t),Be.create(6,t),be.create(9,t),Be.create(7,t),be.create(10,t),ge.create(7,t),be.create(11,t),Be.create(8,t)];return we.set(e,r),r}(e),u={stem:[],branch:[]},o={stem:[],branch:[]},a=0;a<24;a++)if(a!==t&&a!==r){var i=l[a];t>r&&a<t&&a>r||t<r&&(0<=a&&a<t||r<a&&a<=23)?(i instanceof Be&&o.stem.push(i),i instanceof be&&o.branch.push(i)):(i instanceof Be&&u.stem.push(i),i instanceof be&&u.branch.push(i))}return[o,u]},_e={"天德":[function(n,e,t){void 0===e&&(e="month");var r=W(n,e),l=[5,6,3,8,8,7,11,0,9,2,2,1][r],u=!(r%3);return t?u?l===N(n,t):l===W(n,t):[l,u]},$n,["畋獵","取魚"],4],"天德合":[function(n,e,t){void 0===e&&(e="month");var r=[null,1,8,null,3,2,null,5,4,null,7,6][W(n,e)];return t?null!==r&&r===N(n,t):r},$n,["畋獵","取魚"],4,{showGB:!0}],"月德":[function(n,e,t){var r=[8,6,2,0][W(n,"month")%4];return t?r===N(n,t):r},$n,["畋獵","取魚"],4,{showGB:!0}],"月德合":[function(n,e,t){var r=[3,1,7,5][W(n,"month")];return t?r===N(n,t):r},$n,["畋獵","取魚"],4,{showGB:!0}],"月空":[$([2,0,8,6],W,4,"month",N),["上表章"],null,4,{showGB:!0}],"三合":[function(n,e,t){void 0===e&&(e="month");var r=n.char8[e].branch.triad;return t?r.map((function(n){return n.value})).includes(W(n,t)):r},Xn([8,"012b","裁製 修宮室 繕城郭",17,"修倉庫",18,"019a","安碓磑 納畜"],!1),null,4,{showGB:!0}],"五富":[$([5,8,11,2],W,4,"month",W),Xn([18,"020a","牧養 納畜"],!1),null,4,{showGB:!0}],"臨日":[$([4,9,6,11,8,1,10,3,0,5,2,7],W,0,"month"),Xn(["上冊進表章",11,"陳詞訟"],!1),null,4,{showGB:!0}],"驛馬":[$([2,11,8,5],W,4,"month"),Xn([9,"求醫療病"],!1),null,4,{showGB:!0}],"天火":[$([6,3,0,9],W,4,"month"),null,null,-4,{showGB:!0}],"月煞":[$([7,4,1,10],W,4,"month"),null,"".concat(te," 修倉庫 開倉庫 出貨財").split(" "),-4,{actsFilter:function(n,e){var t=W(n,"month");return[2,8,5,11].includes(t)&&e.has("六合")&&["月德","天願"].some((function(n){return e.has(n)}))?{replace:{bad:se}}:null}}],"大時":[$([9,6,3,0],W,4,"month"),null,u([],ue,!0),-4,{actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return[2,8,5,11].includes(t)&&("除"===r||e.has("官日"))||[4,10].includes(t)&&("執"===r||e.has("六合"))||[1,7].includes(t)&&("執"===r||e.has("六害"))&&["月德","天德"].some((function(n){return e.has(n)}))?{replace:{bad:ce}}:null}}],"遊禍":[$([11,8,5,2],W,4,"month"),null,["祈福","求嗣","解除","求醫療病"],-4,{meetDeStillBad:!0,meetWishStillBad:!0}],"天吏":[$([3,0,9,6],W,4,"month"),null,ue,-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return[2,8,5,11].includes(t)&&"危"===r&&k.some((function(n){return e.has(n)}))?{replace:{bad:se}}:null}}],"九空":[$([10,7,4,1],W,4,"month"),null,Xn(["進人口","020b"],!1),-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return([2,8].includes(t)&&"滿"===r||[0,3,6,9].includes(t)&&"開"===r)&&["月德","天德合","月德合"].some((function(n){return e.has(n)}))?{replace:{bad:[]}}:null}}],"月刑":[$([3,10,5,0,4,8,6,1,2,9,7,11],W,0,"month"),null,"".concat(te," 進人口").split(" "),-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return 5===t&&("平"===r||["相日","六合"].some((function(n){return e.has(n)})))&&["月德","天德合","天願"].some((function(n){return e.has(n)}))?{replace:{bad:se}}:null}}],"月建":[X((function(n,e){return void 0===e&&(e="month"),W(n,e)}),W),null,Xn([1,"上冊進表章","012a","般移","014a","求醫療病","017b","20-23","安碓磑 補垣 平治道涂 伐木 栽種","025a"],!1),-4,{showGB:!0,actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||["天赦","月恩","四相"].some((function(n){return e.has(n)}))?{replace:{bad:Xn([16,"興造動土 修倉庫 修置產室 開渠穿井 安碓磑 補垣 平治道涂",23,"伐木 栽種 破土"],!1)}}:2===W(n,"month")&&2===W(n,"day")?{add:{bad:["出師"]}}:null}}],"兵福":[X((function(n,e){return void 0===e&&(e="month"),W(n,e)%12}),W),Xn([10]),null,4,{showGB:!0}],"小時":[X((function(n,e){return void 0===e&&(e="month"),W(n,e)%12}),W),null,null,4,{showGB:!0}],"土府":[X((function(n,e){return void 0===e&&(e="month"),W(n,e)%12}),W),null,null,4,{showGB:!0}],"兵寶":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+1)%12}),W),Xn([10]),null,4,{showGB:!0}],"吉期":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+1)%12}),W),Xn(["施恩封拜 舉正直",9,11]),null,4,{showGB:!0}],"天巫":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+2)%12}),W),["祭祀","祈福"],null,4,{showGB:!0}],"福德":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+2)%12}),W),Xn(["上冊進表章",8,"修宮室 繕城郭"]),null,4,{showGB:!0}],"天罡":[X((function(n,e){return void 0===e&&(e="month"),[3,10,5,0,7,2,9,4,11,6,1,8][W(n,e)]}),W),null,null,-4,{showGB:!0}],"河魁":[X((function(n,e){return void 0===e&&(e="month"),[9,4,11,6,1,8,3,10,5,0,7,2][W(n,e)]}),W),null,null,-4,{showGB:!0}],"死神":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+3)%12}),W),null,Xn([10,"進人口 解除 求醫療病 修置產室",24]),-4,{showGB:!0}],"死氣":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+4)%12}),W),null,Xn([10,"解除 求醫療病 修置產室 栽種"],!1),-4,{showGB:!0,actsFilter:function(n,e){if(k.some((function(n){return e.has(n)})))return{replace:{bad:se}};var t=W(n,"month");return[4,10].includes(t)&&e.has("月厭")?{meetDeStillBad:!0}:null}}],"時陰":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+4)%12}),W),["運謀算","畫計策"],null,4,{showGB:!0}],"小耗":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+5)%12}),W),null,Xn(["020b"],!1),-4,{showGB:!0,actsFilter:function(n,e){if(k.some((function(n){return e.has(n)}))||e.has("天願"))return{replace:{bad:[]}};var t=W(n,"month");return[0,3,6,9].includes(t)&&e.has("劫煞")?{meetDeStillBad:!0}:null}}],"月破":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+6)%12}),W),null,Xn([1,"上冊進表章 頒詔","3-4",6,"8-11","012b","13-14","裁製","營建宮室 繕城郭","017a","鼓鑄",18,"020a","修置產室",22,"安碓磑 補垣塞穴 修飾垣墻 伐木",24,"025a"],!1),-4,{showGB:!0,meetDeStillBad:!0,alias:["大耗"]}],"大耗":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+6)%12}),W),null,Xn(["020b"]),-4,{showGB:!0,meetDeStillBad:!0}],"天喜":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+8)%12}),W),Xn(["施恩封拜 舉正直",8,9,11,"012a"]),null,4,{showGB:!0}],"天醫":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+8)%12}),W),["求醫療病"],null,4,{showGB:!0}],"時陽":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+10)%12}),W),null,null,4,{showGB:!0}],"生氣":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+10)%12}),W),null,null,4,{showGB:!0}],"血支":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+11)%12}),W),null,["針刺"],-4,{showGB:!0}],"五墓":[$([28,4,31,31,4,22,22,4,37,37,4,28],W,0,"month",(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value})),null,Xn(["冠帶",9,"011a","012b",13,"解除 求醫療病","16-17",19,21,24,"25a"]),-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month");return[6,0].includes(t)&&e.has("月德")?{replace:{bad:[]}}:null}}],"九坎":[$([8,5,4,1,10,7,3,0,9,6,2,11],W,0,"month"),null,Xn(["補垣塞穴",26],!1),-4,{showGB:!0,meetDeStillBad:!0}],"土符":[$([8,0,1,5,9,2,6,10,3,7,11,4],W,0,"month"),null,oe,-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"地囊":[X((function(n,e){return void 0===e&&(e="month"),[[27,57],[51,9],[35,6],[31,49],[0,18],[15,45],[40,58],[52,22],[53,23],[2,31],[37,7],[14,44]][W(n,e)]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),null,oe,-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"陽德":[$([6,8,10,0,2,4],W,6,"month"),Xn([5,"007a"],!1),null,4,{showGB:!0}],"陰德":[$([1,11,9,7,5,3],W,6,"month"),Xn([5,"007a"],!1),null,4,{showGB:!0}],"天馬":[$([2,4,6,8,10,0],W,6,"month"),Xn([9,"般移"],!1),null,4,{showGB:!0}],"兵禁":[$([6,4,2,0,10,8],W,6,"month"),null,Xn([10],!1),-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"大煞":[$([8,9,10,5,6,7,2,3,4,11,0,1],W,0,"month"),null,Xn([10],!1),-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"往亡":[$([10,1,2,5,8,11,3,6,9,0,4,7],W,0,"month"),null,ae,-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"歸忌":[$([2,0,1],W,3),null,Xn(["013a"],!1),-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"要安":[$([7,1,2,8,3,9,4,10,5,11,6,0],W,0,"month"),["安神"],null,4,{showGB:!0}],"玉宇":[$([8,2,3,9,4,10,5,11,6,0,7,1],W,0,"month"),["修祠宇"],null,4,{showGB:!0}],"金堂":[$([9,3,4,10,5,11,6,0,7,1,8,2],W,0,"month"),["修祠宇"],null,4,{showGB:!0}],"敬安":[$([0,6,7,1,8,2,9,3,10,4,11,5],W,0,"month"),["安神"],null,4,{showGB:!0}],"普護":[$([1,7,8,2,9,3,10,4,11,5,0,6],W,0,"month"),["祭祀","祈福"],null,4,{showGB:!0}],"福生":[$([2,8,9,3,10,4,11,5,0,6,1,7],W,0,"month"),["祭祀","祈福"],null,4,{showGB:!0}],"聖心":[$([4,10,11,5,0,6,1,7,2,8,9,3],W,0,"month"),["祭祀","祈福"],null,4,{showGB:!0}],"益後":[$([5,11,0,6,1,7,2,8,9,3,4,10],W,0,"month"),Xn(["001a"]),null,4,{showGB:!0}],"續世":[$([0,6,1,7,2,8,9,3,4,10,5,11],W,0,"month"),Xn(["001a"]),null,4,{showGB:!0}],"月厭":[Q(-1),null,le,-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return([2,8].includes(t)&&"成"===r||[1,7].includes(t)&&"開"===r)&&["月德","天德合","月德合"].some((function(n){return e.has(n)}))?{replace:{bad:Xn(["9-10","012a",15,"013a","栽種"])}}:null}}],"六合":[Q(0),Xn(["宴會 結婚姻 嫁娶 進人口",18,"立券 交易 納財 納畜 安葬"],!1),null,4,{showGB:!0,actsFilter:function(n,e){return["月恩","四相","時德"].some((function(n){return e.has(n)}))?{add:{good:["修倉庫"]}}:null}}],"天賊":[Q(2),null,Xn([9,"修倉庫","納財","出貨財"],!1),-4,{showGB:!0,meetDeStillBad:!0}],"天倉":[Q(3),["進人口","納財","納畜"],null,4,{showGB:!0}],"六儀":[Q(4),["臨政親民"],null,4],"月害":[Q(5),null,Xn([1,"上冊進表章 頒詔",8,10,"012b",18,"020a","修置產室 牧養","025a"],!1),-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return([3,9].includes(t)&&("除"===r||e.has("守日"))||[1,7].includes(t)&&("執"===r||e.has("大時")))&&["月德","天德合","天願"].some((function(n){return e.has(n)}))?{replace:{bad:se}}:null}}],"天願":[X((function(n){return[49,0,11,10,21,32,43,54,5,16,27,38][n.getMonthBuilder(0)[0].branch.value]}),(function(n,e){return void 0===e&&(e="day"),n.char8[e].value})),ne,null,4,{showGB:!0}],"兵吉":[X((function(n){for(var e=n.getMonthBuilder(0)[0].branch.value,t=[],r=2;r<6;r++)t.push((r+e)%12);return t}),W,"includes"),Xn([10],!1),null,4,{showGB:!0}],"解神":[X((function(n,e){return void 0===e&&(e="month"),[6,6,8,8,10,10,0,0,2,2,4,4][W(n,e)]}),W),Xn(["上表章 陳詞訟 沐浴","014a",15],!1),null,4,{showGB:!0}],"月恩":[$([0,7,2,3,6,5,4,7,8,9,6,1],W,0,"month",N),ee,null,4,{showGB:!0}],"復日":[$([9,5,0,1,4,2,3,5,6,7,4,8],W,0,"month",N),["裁製"],Xn(["025a"],!1),-4,{showGB:!0,actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||["天赦","六合"].some((function(n){return e.has(n)}))?{replace:{bad:[]},gRemove:{good:Xn(["025a"],!1)}}:null}}],"不將":[X((function(n){var e=Ge(n.getMonthBuilder(0)[0].branch.value),t=e[0],r=e[1],l=[],u=n.getSeasonIndex(),o=t.stem.map((function(n){return n.value}));0!==u&&3!==u||o.push(5),1!==u&&2!==u||o.push(4);for(var a=0,i=o;a<i.length;a++)for(var c=i[a],s=0,h=r.branch;s<h.length;s++){var d=h[s];(c+d.value)%2==0&&l.push(z(c,d.value))}return l}),(function(n){return n.char8.day.value}),"includes"),["嫁娶"],null,4,{showGB:!0}],"大會":[$([48,59,10,21,null,null,42,null,53,16,27,null],W,0,"month",(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"小會":[$([35,24,null,15,4,5,54,null,null,null,45,34],W,0,"month",(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"行狠":[$([37,null,null,null,20,31,null,null,null,null,null,26],W,0,"month",(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"了戾":[$([49,null,null,null,32,43,null,null,null,null,null,38],W,0,"month",(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"孤辰":[X((function(n,e){return void 0===e&&(e="month"),[[1,13,25],null,null,null,[32,56,44],[55,7,19],null,null,null,null,null,[50,2,14]][W(n,e)]}),(function(n){return n.char8.day.value}),"includes"),null,null,-4,{showGB:!0}],"單陰":[X((function(n,e){return void 0===e&&(e="month"),4===W(n,e)?4:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"純陽":[X((function(n,e){return void 0===e&&(e="month"),5===W(n,e)?5:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"孤陽":[X((function(n,e){return void 0===e&&(e="month"),11===W(n,e)?34:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"純陰":[X((function(n,e){return void 0===e&&(e="month"),11===W(n,e)?35:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"歲薄":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 5===t?[42,54]:11===t?[48,24]:null}),(function(n){return n.char8.day.value}),"includes"),null,null,-4,{showGB:!0}],"逐陣":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 1===t?[48,24]:7===t?[42,54]:null}),(function(n){return n.char8.day.value}),"includes"),null,null,-4,{showGB:!0}],"陰陽交破":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 5===t?59:11===t?53:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"陰陽擊沖":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 0===t?42:6===t?48:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"陽破陰沖":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 1===t?43:7===t?49:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"陰位":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 4===t?16:10===t?10:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"陰道沖陽":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 3===t?45:9===t?15:null}),(function(n){return n.char8.day.value})),null,null,4,{showGB:!0}],"三陰":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 2===t?57:8===t?51:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"陽錯":[X((function(n,e){return void 0===e&&(e="month"),[null,[49],[50],[51],[40],[53,5],null,[43,55],[56],[57],[46],[59]][W(n,e)]}),(function(n){return n.char8.day.value}),"includes"),null,null,-4,{showGB:!0}],"陰錯":[X((function(n,e){return void 0===e&&(e="month"),[null,[59],[46],[57],[56],[43,31],null,[53,3],[40],[51],[50],[49]][W(n,e)]}),(function(n){return n.char8.day.value}),"includes"),null,null,-4,{showGB:!0}],"陰陽俱錯":[X((function(n,e){void 0===e&&(e="month");var t=W(n,e);return 1===t?48:6===t?42:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"絕陰":[X((function(n,e){return void 0===e&&(e="month"),5===W(n,e)?4:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"絕陽":[X((function(n,e){return void 0===e&&(e="month"),0===W(n,e)?34:null}),(function(n){return n.char8.day.value})),null,null,-4,{showGB:!0}],"天狗":[X((function(n,e){return void 0===e&&(e="month"),(W(n,e)+2)%12==10?10:null}),(function(n){return n.char8.day.value})),null,["祭祀"],-4,{showGB:!0}]},Se={"天后":u([],_e.驛馬,!0),"大敗":[_e.大時[0],null,null,-4],"咸池":[_e.大時[0],null,["取魚","乘船渡水"],-4,_e.大時[4]],"致死":[_e.天吏[0],null,null,-4],"九焦":[_e.九坎[0],null,Xn(["鼓鑄 栽種 修筑園圃"],!1),-4],"血忌":[_e.續世[0],null,["針刺"],-4,{meetDeStillBad:!0,meetWishStillBad:!0}],"厭對":[_e.六儀[0],null,["嫁娶"],-4,{actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||e.has("天赦")?{replace:{bad:[]}}:null}}],"招搖":[_e.六儀[0],null,["嫁娶"],-4],"地火":u([],_e.月厭,!0)},De=Object.assign({},_e,Se),Oe={"天赦":[X((function(n){return[14,30,44,0][n.getSeasonIndex()]}),(function(n,e){return n.char8[e].value})),$n,["畋獵","取魚"],4,{showGB:!0}],"母倉":[X((function(n){return[[11,0],[2,3],[4,7,10,1],[8,9]][n.getSeasonIndex()]}),W,"includes"),Xn(["納財",24]),null,4,{showGB:!0}],"四相":[X((function(n){return[[2,3],[4,5],[8,9],[0,1]][n.getSeasonIndex()]}),N,"includes"),ee,null,4,{showGB:!0}],"時德":[X((function(n){return[6,4,0,2][n.getSeasonIndex()]}),W),ee,null,4,{showGB:!0}],"王日":[X((function(n){return[2,5,8,11][n.getSeasonIndex()]}),W),Xn(["頒詔",2,3,"008a",9,"011a","裁製"],!1),null,4,{showGB:!0}],"官日":[X((function(n){return[3,6,9,0][n.getSeasonIndex()]}),W),Xn(["011b"],!1),null,4,{showGB:!0}],"守日":[X((function(n){return[4,7,10,1][n.getSeasonIndex()]}),W),Xn(["011b","安撫邊境"],!1),null,4,{showGB:!0}],"相日":[X((function(n){return[5,8,11,2][n.getSeasonIndex()]}),W),Xn(["011b"],!1),null,4,{showGB:!0}],"民日":[X((function(n){return[6,9,0,3][n.getSeasonIndex()]}),W),Xn(["宴會",12,"進人口","019a",24],!1),null,4,{showGB:!0}],"四擊":[X((function(n){return[10,1,4,7][n.getSeasonIndex()]}),W),null,Xn([10],!1),-4,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"四忌":[X((function(n){return[0,12,36,48][n.getSeasonIndex()]}),(function(n,e){return n.char8[e].value})),null,Xn([10,"012a","安葬"],!1),-4,{showGB:!0,actsFilter:function(n,e){return 2===W(n,"month")&&11===n.char8.day.value&&e.has("天願")?{replace:{bad:ce}}:{meetDeStillBad:!0}}}],"四窮":[X((function(n){return[11,23,47,59][n.getSeasonIndex()]}),(function(n,e){return n.char8[e].value})),null,Xn([10,"012b","020b","安葬"],!1),-4,{showGB:!0,actsFilter:function(n,e){return 2===W(n,"month")&&11===n.char8.day.value&&e.has("天願")?{replace:{bad:ce}}:{meetDeStillBad:!0}}}],"四耗":[X((function(n){return[48,51,54,57][n.getSeasonIndex()]}),(function(n,e){return n.char8[e].value})),null,Xn([10,"020b"],!1),-4,{showGB:!0,actsFilter:function(n,e){var t=W(n,"month");return 4===t&&["天德","月德"].some((function(n){return e.has(n)}))||5===t&&e.has("月德合")||[1,4,7,10].includes(t)&&e.has("三合")?{replace:{bad:ce}}:null}}],"四廢":[X((function(n){return[[56,57],[48,59],[50,51],[53,42]][n.getSeasonIndex()]}),(function(n,e){return n.char8[e].value}),"includes"),null,Xn([1,"上冊進表章 頒詔",3,4,6,8,"冠帶","9-11","012b",13,"解除 求醫療病 裁製","017b","鼓鑄",18,"020a",21,"開渠穿井 安碓磑 補垣塞穴 修飾垣墻",24,"025a"],!1),-4,{showGB:!0,actsFilter:function(n,e){return e.has("月破")?{isAllBad:!0,meetDeStillBad:!0}:{meetDeStillBad:!0}}}],"五虛":[X((function(n){return[[5,9,1],[8,0,4],[11,3,7],[2,6,10]][n.getSeasonIndex()]}),W,"includes"),null,Xn(["修倉庫",20],!1),-4,{showGB:!0,actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||e.has("六合")?{replace:{bad:[]}}:null}}],"八風":[X((function(n){return[[13,53],[40,20],[43,23],[10,50]][n.getSeasonIndex()]}),(function(n,e){return n.char8[e].value}),"includes"),null,Xn([26],!1),-4,{showGB:!0,actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||e.has("六合")?{replace:{bad:[]}}:null}}]},ke={"天恩":[X((function(n){return[0,1,2,3,4,15,16,17,18,19,45,46,47,48,49,50,51,52,53,54]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),"覃恩 肆赦 施恩惠 恤孤煢 布政事 行惠愛 雪冤枉 緩刑獄 慶賜 賞賀 宴會 行幸".split(" "),null,2,{showGB:!0}],"五合":[X((function(n){return[2,3]}),(function(n,e){return void 0===e&&(e="day"),W(n,e)}),"includes"),["宴會","結婚姻","立券","交易"],null,2,{showGB:!0}],"除神":[X((function(n){return[8,9]}),(function(n,e){return void 0===e&&(e="day"),W(n,e)}),"includes"),["解除","沐浴","整容","剃頭","整手足甲","求醫療病","掃舍宇"],null,2,{showGB:!0}],"五離":[X((function(n){return[8,9]}),(function(n,e){return void 0===e&&(e="day"),W(n,e)}),"includes"),null,Xn([8,12,"立券 交易"],!1),-2,{showGB:!0,actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||["天赦","六合","三合"].some((function(n){return e.has(n)}))?{replace:{bad:[]}}:null}}],"鳴吠":[X((function(n){return[30,42,6,18,20,32,56,8,21,33,45,57,9]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),["破土","安葬"],null,2,{showGB:!0}],"鳴吠對":[X((function(n){return[12,36,48,50,2,26,38,51,4,27,39]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),["破土","啟攢"],null,2,{showGB:!0}],"寶日":[X((function(n){return[13,22,30,36,38,39,41,43,44,45,47,52]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),["安撫邊境","選將訓兵","出師"],null,2,{showGB:!0}],"義日":[X((function(n){return[0,3,4,5,7,8,9,11,16,37,46,54]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),["安撫邊境","選將訓兵","出師"],null,2,{showGB:!0}],"製日":[X((function(n){return[1,10,18,24,26,27,29,31,32,33,35,40]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),["安撫邊境","選將訓兵","出師"],null,2,{showGB:!0}],"專日":[X((function(n){return[4,5,34,42,48,50,51,53,55,56,57,59]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),null,Xn([10],!1),-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"伐日":[X((function(n){return[6,12,14,15,17,19,20,21,23,28,49,58]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),null,Xn([10],!1),-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"八專":[X((function(n){return[50,43,55,56,49]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),null,Xn([10,"012a"],!1),-2,{showGB:!0,meetDeStillBad:!0,actsFilter:function(n,e){return e.has("天願")?{replace:{bad:ce}}:null}}],"觸水龍":[X((function(n){return[12,19,49]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),null,Xn([26],!1),-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"無祿":[X((function(n){return[40,41,32,23,34,25,16,17,8,59]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value}),"includes"),null,null,-2,{showGB:!0,actsFilter:function(n,e){var t=Xn(["祭祀 解除 沐浴",14,"掃舍宇 修飾垣墻 平治道涂 破屋壞垣 伐木"],!1),r=W(n,"year"),l=W(n,"month"),u=W(n,"day"),o=N(n,"day"),a="".concat(o,"-").concat(u);if("9-11"===a)return{gOnlySign:t};if(["天德","月德"].some((function(n){return e.has(n)})))return null;for(var i=0,c=[[2,["0-4"]],[3,["1-5"]],[5,["2-8","4-10"]],[6,["3-11","5-1"]],[8,["6-4"]],[9,["7-5"]],[11,["8-8"]]];i<c.length;i++){if((r===(v=c[i])[0]||l===v[0])&&v[1].includes(a))return null}for(var s=0,h=[[[0,5],[11,3,7],"5-1"],[[1,6],[5,9,2],"1-5"],[[2,7],[2,6,10],"7-5"],[[3,8],[8,0,4],"3-11"]];s<h.length;s++){if((v=h[s])[0].includes(r)&&v[1].includes(l)&&a===v[2])return null}for(var d=0,f=[[[1,6],11,"6-4"],[[2,7],5,"2-8"],[[3,8],2,"8-8"],[[4,9],8,"4-10"]];d<f.length;d++){var v;if((v=f[d])[0].includes(r)&&v[1]===l&&a===v[2])return null}return{gOnlySign:t}}}],"重日":[X((function(n){return 35}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value})),null,Xn(["025a"],!1),-2,{showGB:!0,actsFilter:function(n,e){return k.some((function(n){return e.has(n)}))||["天赦","六合"].some((function(n){return e.has(n)}))?{replace:{bad:[]},gRemove:{good:Xn(["025a"],!1)}}:null}}],"上朔":[X((function(n){return[59,5,11,17,23,29,35,41,47,53][N(n,"year")]}),(function(n,e){return void 0===e&&(e="day"),I(n,e,0).value})),null,ie,-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"長星":[function(n,e,t){var r=[[7],[4],[1],[9],[15],[10],[8],[2,5],[3,4],[1],[12],[9]][n.lunar.month-1];return t?1===r.length?r[0]===n.lunar.day:r.includes(n.lunar.day):r},null,Xn(["進人口 裁製 經絡","019a","納畜"],!1),-2,{showGB:!0}],"短星":[function(n,e,t){var r=[[21],[19],[16],[25],[25],[20],[22],[18,19],[16,17],[15],[22],[25]][n.lunar.month-1];return t?1===r.length?r[0]===n.lunar.day:r.includes(n.lunar.day):r},null,Xn(["進人口 裁製 經絡","019a","納畜"],!1),-2,{showGB:!0}],"反支":[function(n,e,t){var r=n.lunar.day,l=[6,6,5,5,4,4,3,3,2,2,1,1][n.add(1-r,"day").char8.day.branch.value];return t?l===r:l},null,Xn(["上冊進表章","陳詞訟"],!1),-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"四離":[function(n,e,t){var r=n.add(1,"day");return!!r.solarTerm&&[23,11,5,17].includes(r.solarTerm.value)},null,ie,-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"四絕":[function(n,e,t){var r=n.add(1,"day");return!!r.solarTerm&&[2,8,14,20].includes(r.solarTerm.value)},null,ie,-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}],"氣往亡":[function(n,e,t){var r=W(n,"month"),l=[20,30,7,14,21,8,16,24,9,18,27,10][r];if(!t)return l;var u=n.add(1-l,"day");return!!u.solarTerm&&(13+(u.solarTerm.value>>1))%12===r},null,ae,-2,{showGB:!0,meetDeStillBad:!0,meetWishStillBad:!0}]};function je(n,e,t,r){var l=n.data.extra,u={good:new Set(n.data.good),bad:new Set(n.data.bad)},o=l&&l.actsFilter?l.actsFilter(e.lsr,t):null;if(l){var a=function(n){(null==o?void 0:o.replace)&&(null==o?void 0:o.replace[n])?u[n]=new Set(o.replace[n]):((null==o?void 0:o.add)&&(null==o?void 0:o.add[n])&&o.add[n].forEach((function(e){u[n].add(e)})),(null==o?void 0:o.remove)&&(null==o?void 0:o.remove[n])&&o.remove[n].forEach((function(e){u[n].delete(e)}))),(null==o?void 0:o.gRemove)&&(o.gRemove[n]||[]).forEach((function(e){r.gRemove[n].push(e)}))};a("good"),a("bad"),(null==o?void 0:o.gOnlySign)&&(o.gOnlySign||[]).forEach((function(n){r.gOnlySign.push(n)}))}for(var i=Array.from(u.bad.keys()),c=Array.from(u.good.keys()),s=0,h=i;s<h.length;s++){var d=h[s];((null==o?void 0:o.meetDeStillBad)||(null==l?void 0:l.meetDeStillBad))&&r.mdsbActs.push(d),((null==o?void 0:o.meetWishStillBad)||(null==l?void 0:l.meetWishStillBad))&&r.mwsbActs.push(d),d&&r.acts.bad.add(d)}for(var f=0,v=c;f<v.length;f++){(d=v[f])&&r.acts.good.add(d)}return u}var Ae=function(n){var e=n.getDuty12God().key+"日",t=n.getLife12God("month").key,r=function(){for(var n=new Set,e=0,t=x;e<t.length;e++){var r=t[e];n.add(r)}for(var l=0,u=P;l<u.length;l++)r=u[l],n.add(r);return n}(),l=new Set,u=new Set,o={gods:u,signGods:l,acts:{good:new Set,bad:new Set},mdsbActs:[],mwsbActs:[],gRemove:{good:[],bad:[]},gOnlySign:[]};r.has(e)&&l.add(e),r.has("月令".concat(t))&&l.add("月令".concat(t));for(var a=n.getGods("MD"),i=0,c=a;i<c.length;i++){var s=c[i];r.has(s.key)&&l.add(s.key),j.has(s.key)&&l.add("德"),u.add(s.key)}for(var h=0,d=a;h<d.length;h++){je(s=d[h],n,u,o)}return je(n.getDuty12God(),n,u,o),o},Pe=function(n){var e=Ae(n);nn(e.acts.good,e.gRemove.good),nn(e.acts.bad,e.gRemove.bad),e.gOnlySign&&e.gOnlySign.length>0&&function(n,e){for(var t=new Set,r=new Set,l=0,u=e;l<u.length;l++){var o=u[l];n.good.has(o)&&t.add(o),n.bad.has(o)&&r.add(o)}n.good=t,n.bad=r}(e.acts,e.gOnlySign);var t=function(n,e){for(var t=W(n.lsr,"month"),r=null,l=0,u=x;l<u.length;l++){var o=u[l];e.has(o)&&(r=M[o])}if(!r)return[-1,-1];var a=-1;n:for(var i=0,c=r;i<c.length;i++){var s=c[i],h=s[0],d=s[1],f=s[2];if(d.includes(t))for(var v=0,g=f;v<g.length;v++){var y=g[v];if(e.has(y)){a=h;break n}}}var m=1;return 5===a?m=3:4===a?m=e.has("德")?2:3:3===a?m=e.has("德")?1:2:2===a?m=e.has("德")?0:2:1===a?m=e.has("德")?0:1:0===a&&(m=0),[a,m]}(n,e.signGods),r=e.acts;return function(n,e,t){var r=function(r){if(!t)return!1;for(var l=void 0===t[r]?[]:t[r],u=0;u<l.length;u++)if(l[u](n,e))return!0;return!1};if(3===n){if(r("l3"))return;return e.good=new Set(["諸事不宜"]),void(e.bad=new Set(["諸事不宜"]))}for(var l=0,u=Array.from(e.bad.keys());l<u.length;l++){var o=u[l];if(e.good.has(o))if(2===n){if(r("l2"))return;e.good.delete(o)}else if(1===n){if(r("l1"))return;e.good.delete(o),e.bad.delete(o)}else if(0===n){if(r("l0"))return;e.bad.delete(o)}}}(t[1],r),r.good.has("諸事不宜")&&r.bad.has("諸事不宜")?{good:new Set(["諸事不宜"]),bad:new Set(["諸事不宜"])}:(he(n,t,e),e.acts)},xe=new Array(60).fill(null),Me=new Array(60),Ye=new Array(60).fill(0),Le=function(n){for(var e,t,r=n.char8.day,l=function(n,e,t){void 0===t&&(t="day");var r=(e+(12-un[n%6]))%12;return[r,on(r,t)]}(r.branch.value,0,"hour")[0],u=new Array(12).fill(0),o=0,a=new Array(12),i=0;i<12;i++){var c=new Array,s=on((l+i)%12,"hour"),h=an(s),d=h&&h[2]>0?1:0;c.push(s);var f=h?h[2]:0;for(var v in vn){var g=vn[v],y=g[4];if(y&&y.isDay60HourGod){var m=(0,g[0])(n,"day");if(null!==m){var p=!1,b=y.checkBy,B=null;if("stem"===b)e=r.stem.value,void 0===(t=i)&&(t=0),B=(e%5*2+t)%10;else{if("branch"!==b)continue;B=i}if((Array.isArray(m)&&m.includes(B)||"number"==typeof m&&m===B)&&(p=!0),p)c.push(v),f+=g[3]>0?1:g[3]<0?-1:0}}}a[i]=c,u[i]=f,o+=(d>0?1:0)<<i}return xe[r.value]=a,Me[r.value]=u,Ye[r.value]=o,a};var Fe=function(){function n(n){var e,t=(null===(e=null==n?void 0:n.extra)||void 0===e?void 0:e.alias)||[],r={key:n.key,good:u([],n.good||[],!0),bad:u([],n.bad||[],!0),luckLevel:(null==n?void 0:n.luckLevel)||0,cate:(null==n?void 0:n.cate)||null,extra:(null==n?void 0:n.extra)||null,alias:u([],t,!0)};for(var l in r)Object.defineProperty(r,l,{writable:!1});this.data=r}return Object.defineProperty(n.prototype,"key",{get:function(){return this.data.key},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.key},n}(),Te=new Map,Ee={common:{"劫煞":[$([5,2,11,8],W,4),null,re,-12,{actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return[2,8,5,11].includes(t)&&0===fn(n,"month")[0]&&"收"===r||[2,8].includes(t)&&e.has("六合")||[5,11].includes(t)&&e.has("月害")&&["月德","天德"].some((function(n){return e.has(n)}))||[4,7,10,1].includes(t)&&("除"===r||e.has("相日")&&k.some((function(n){return e.has(n)})))?{replace:{bad:se}}:null}}],"災煞":[$([6,3,0,9],W,4),null,"".concat(te," 苫蓋").split(" "),-12,{actsFilter:function(n,e){var t=W(n,"month"),r=hn(n)[1];return([2,8,5,11].includes(t)&&"開"===r||[4,7,10,1].includes(t)&&"滿"===r)&&k.some((function(n){return e.has(n)}))?{replace:{bad:se}}:null}}]},year:ve,month:De,day:ke,hour:vn,monthSeason:Oe};function He(n,e,t){var r="".concat(n,":").concat(e||0);if(Te.has(r))return Te.get(r);var l,u={key:n,good:[],bad:[],luckLevel:0,cate:e,extra:null};if("blackYellow"===t){var o=an(n);if(!o)return;u.good=o[0],u.bad=o[1],u.luckLevel=o[2],u.extra={showGB:!0}}else if("duty"===t){var a=(l=n,sn.hasOwnProperty(l)?sn[l]:null);if(!a)return;u.good=a[0],u.bad=a[1],u.extra=a[2],u.luckLevel=a[3]}else if("life"===t){if(!dn.includes(n))return}else{var i=void 0;if(t&&Ee.hasOwnProperty(t)?i=Ee[t]:e&&Ee.hasOwnProperty(e)&&(i=Ee[e]),!i||!i.hasOwnProperty(n))return;var c=i[n];c[0];var s=c[1],h=c[2],d=c[3],f=c[4],v=d>0?1:-1;u.good=s,u.bad=h,u.luckLevel=v,u.extra=f||null}var g=new Fe(u);return g&&Te.set(r,g),g}var Ie=function(){function n(n){this.lang="zh",this.supple=new Map;var e,t=n.key,r=n.cate,l=n.fromDict,u=n.lang;if(void 0!==n.godBase?e=n.godBase:void 0!==t&&void 0!==r&&(e=He(t,r,l)),!e)throw new Error("no this god");this.godBase=e,u&&(this.lang=u)}return Object.defineProperty(n.prototype,"key",{get:function(){return this.godBase.key},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this.godBase.data},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alias",{get:function(){var n=this;return this.data.alias.map((function(e){return tn(e,n.lang,"gods")}))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return tn(this.godBase.key,this.lang,"gods")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cate",{get:function(){return this.data.cate},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"good",{get:function(){var n=this;return this.data.good.map((function(e){return tn(e,n.lang,"acts")}))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bad",{get:function(){var n=this;return this.data.bad.map((function(e){return tn(e,n.lang,"acts")}))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"luckLevel",{get:function(){return this.data.luckLevel},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return this.name},n}();function We(n,e,t,r,l){return(0,t[e][0])(n,r,l)}function Ne(n,e,t,r){return new Ie({key:e,cate:t,fromDict:r,lang:n.getConfig("lang")})}var Re=function(n,e,t,r,l){var u=[],o=function(n){if(Ee.hasOwnProperty(n))return Ee[n]}(e);if(!o)return u;for(var a in o)if(We(n,a,o,t,r)){var i=Ne(n,a,l,e);i&&u.push(i)}return u},ze=function(n,e,t){var r=J(e,!0),l="theGods:godsData:".concat(e);if(t&&t.has(l))return t.get(l);var u=[],o=null!==r;return"y"===r?(u=Re(n.lsr,"year","year","day","year")).push.apply(u,Re(n.lsr,"common","year","day","year")):"m"===r?((u=Re(n.lsr,"month","month","day","month")).push.apply(u,Re(n.lsr,"common","month","day","month")),u.push.apply(u,Re(n.lsr,"monthSeason","month","day","month"))):"d"===r?(u=Re(n.lsr,"day",void 0,"day","day")).push(n.getBy12God("day")):"h"===r&&(u=Re(n.lsr,"hour","day","hour","hour")).push(n.getBy12God("hour")),t&&o&&t.set(l,u),u},Ce=["喜神","福神","財神","陽貴","陰貴"],Ve={"喜神":{rule:[3,21,15,12,9],ruleValueType:"Direction24",ruleIndexType:"Stem",good:Xn(["嫁娶 冠帶 般移","017b"]),extra:{actsFilter:function(n,e){return N(n,"day")%5==2?{remove:{good:["嫁娶"]}}:null}}},"福神":{rule:[0,15,21,9,3],ruleValueType:"Direction24",ruleIndexType:"Stem"},"財神":{rule:[3,3,15,15,0,0,6,6,12,12],ruleValueType:"Direction24",ruleIndexType:"Stem"},"陽貴":{rule:[15,15,18,21,3,0,12,3,6,9],ruleValueType:"Direction24",ruleIndexType:"Stem"},"陰貴":{rule:[3,0,21,18,15,15,3,12,9,6],ruleValueType:"Direction24",ruleIndexType:"Stem"}},qe=function(n,e){var t,r,l,u,o="".concat(n,":day:direction");if(Te.has(o))return u=Te.get(o),new Ie({godBase:u,lang:e});var a=Ve[n];if(!a)throw new Error("Invalid god data");var i={key:n,good:null!==(t=a.good)&&void 0!==t?t:[],bad:null!==(r=a.bad)&&void 0!==r?r:[],luckLevel:1,cate:"day",extra:null!==(l=a.extra)&&void 0!==l?l:null};return u=new Fe(i),new Ie({godBase:u,lang:e})},Ue=function(){function n(n){this._cache=new Map,this.lsr=n}return n.getAllActs=function(n,e){void 0===n&&(n=0),void 0===e&&(e="zh");var t=function(n){return e?tn(n,e,"acts"):n};return 1===n?Un.map((function(n){return t(n)})):2===n?Jn.map((function(n){return t(n)})):3===n?Zn.map((function(n){return t(n)})):Qn.map((function(n){return t(n)}))},Object.defineProperty(n.prototype,"lang",{get:function(){return this.lsr.getConfig("lang")},enumerable:!1,configurable:!0}),n.prototype.getGods=function(n){var e=this;void 0===n&&(n="MD"),n=J(n,!1);var t=new Set(["y","m","d","h"]);if(t.has(n))return ze(this,n,this._cache);return V("theGods:getGods:".concat(n),(function(){for(var r=[],l=new Set,u=0;u<n.length;u++){var o=n[u];if(!l.has(o)&&t.has(o)){var a=ze(e,o,e._cache);l.add(o),r.push.apply(r,a)}}return r}),this._cache)},n.prototype.getGoodGods=function(n){return void 0===n&&(n="MD"),this.getGods(n).filter((function(n){var e,t=n.data,r=(null===(e=null==t?void 0:t.extra)||void 0===e?void 0:e.showGB)||!1;return t.luckLevel>0&&r}))},n.prototype.getBadGods=function(n){return void 0===n&&(n="MD"),this.getGods(n).filter((function(n){var e,t=n.data,r=(null===(e=null==t?void 0:t.extra)||void 0===e?void 0:e.showGB)||!1;return t.luckLevel<0&&r}))},n.prototype.getAllDayHourGods=function(){var n="theGods:allDayHourGods";if(this._cache.has(n))return this._cache.get(n);for(var e=function(n){var e=n.char8.day.value,t=xe[e];return t||(t=Le(n)),t.slice()}(this.lsr),t=new Array(12),r=(0,vn.貴登天門[0])(this.lsr,"day"),l=(0,vn.九醜[0])(this.lsr,"day"),u=0;u<12;u++){for(var o=e[u]||[],a=[],i=0;i<o.length;i++){var c=o[i];if(c){if(0===i)if(an(c)){a.push(Ne(this.lsr,c,"hour","blackYellow"));continue}var s=Ne(this.lsr,c,"hour","hour");s&&(a.push(s),"天乙貴人"===c&&r.includes(u)&&s.supple.set("貴登天門",!0)),null!==l&&l===u&&a.push(Ne(this.lsr,"九醜","hour","hour"))}}t[u]=a}return this._cache.set(n,t),t},n.prototype.getLuckHours=function(n){return void 0===n&&(n=0),function(n,e){void 0===e&&(e=0);var t=n.char8.day.value;if(xe[t]||Le(n),0===e){for(var r=[],l=Ye[t],u=0;u<12;u++){var o=(l>>u&1)>0?1:-1;r.push(o)}return r}return Me[t].slice()}(this.lsr,n)},n.prototype.getAllLuckDirection=function(){var n=this,e="theGods:allLuckDirection";if(this._cache.has(e))return this._cache.get(e);var t=Ce.map((function(e){return n.getLuckDirection(e)}));return this._cache.set(e,t),t},n.prototype.getLuckDirection=function(n){var e=this,t=Ce.find((function(t){return t===n||tn(t,e.lang,"gods")===n}));if(!t)return null;var r="theGods:luckDirection:".concat(t);if(this._cache.has(r))return this._cache.get(r);var l=this.lsr.char8.day.stem.value,u=Ve[t],o=u.rule.length,a=u.rule[l%o],i=[this.lsr.lunisolar.Direction24.create(a,{lang:this.lang}),qe(t,this.lang)];return this._cache.set(r,i),i},n.prototype.getDuty12God=function(){var n="theGods:duty12God";if(this._cache.has(n))return this._cache.get(n);var e=function(n){var e=hn(n),t=e[0],r=e[1],l=sn[r],u=l[0],o=l[1],a=l[2],i=l[3];return[t,r,u,o,Object.assign({},{showGB:!1},a),i]}(this.lsr),t=e[1],r=Ne(this.lsr,t,"day","duty");return this._cache.set(n,r),r},n.prototype.getLife12God=function(n){var e="theGods:live12God:".concat(n);if(this._cache.has(e))return this._cache.get(e);var t=fn(this.lsr,n)[1],r=Ne(this.lsr,t,n,"life");return this._cache.set(e,r),r},n.prototype.getBy12God=function(n){var e="day"===n?"month":"day",t="theGods:by12God:".concat(n);if(this._cache.has(t))return this._cache.get(t);var r=function(n,e,t){var r=W(n,e),l=(W(n,t)+(12-un[r%6]))%12,u=on(l,t),o=ln[u];return[l,u,o[0],o[1],o[2]]}(this.lsr,e,n),l=r[1],u=Ne(this.lsr,l,n,"blackYellow");return this._cache.set(t,u),u},n.prototype.getActs=function(n,e,t){var r=this;void 0===n&&(n=0),void 0===e&&(e=!1);var l="theGods:getActs:".concat(n,":").concat(e?1:0,": ").concat(t?function(n){var e="";for(var t in n)e+="".concat(t).concat(n[t]);return e}(t):"null");return V(l,(function(){var l=function(n,e,t,r){void 0===e&&(e=0),void 0===t&&(t=!1);var l,u=function(n){return t?tn(n,t,"acts"):n};if(n.good.has("諸事不宜"))return{good:[u("諸事不宜")],bad:[u("諸事不宜")]};var o={};1===e?(l=Un,o={"上冊進表章":"上冊受封","興造動土":"修造動土","宴會":"會親友","遣使":"出行","般移":"移徒","製裁":"裁衣","施恩封拜":"襲爵受封"}):2===e?(l=Jn,o={"補垣塞穴":"補垣","襲爵受封":"施恩封拜"}):3===e?(l=Zn,o={"興造動土":"修造動土","宴會":"會親友","遣使":"出行","上官赴任":"上官","般移":"移徒","製裁":"裁衣"}):(l=Qn,o={"襲爵受封":"施恩封拜"}),function(n,e){for(var t in e){var r=e[t];n.good.has(t)&&(n.good.delete(t),n.good.add(r)),n.bad.has(t)&&(n.bad.delete(t),n.bad.add(r))}}(n,Object.assign({},o,null!=r?r:{}));for(var a=[],i=[],c=0,s=l;c<s.length;c++){var h=s[c];n.good.has(h)&&a.push(u(h)),n.bad.has(h)&&i.push(u(h))}return{good:0===a.length?[u("諸事不宜")]:a,bad:i}}(Pe(r),n,!e&&r.lsr.getConfig().lang,t);return l}),this._cache)},n.prototype.getGoodActs=function(n,e,t){return void 0===n&&(n=0),void 0===e&&(e=!1),this.getActs(n,e,t).good},n.prototype.getBadActs=function(n,e,t){return void 0===n&&(n=0),void 0===e&&(e=!1),this.getActs(n,e,t).bad},n.prototype.query=function(n){var e=this,t=function(t){return function(n,e,t){return n===e||n===tn(e,t,"queryString")}(n,t,e.lang)};return t(a)?this.getGods("Y"):t(i)?this.getGods("M"):t(c)?this.getGods("D"):t(s)?this.getGods("H"):t(h)?this.getGods("MD"):t(d)?this.getBy12God("day"):t(f)?this.getBy12God("hour"):t(v)?this.getDuty12God():t(g)?this.getLife12God("year"):t(y)?this.getLife12God("month"):t(m)?this.getLife12God("day"):t(p)?this.getLife12God("hour"):t(b)?this.getGoodActs(0):t(B)?this.getGoodActs(1):t(w)?this.getGoodActs(2):t(G)?this.getGoodActs(3):t(_)?this.getBadActs(0):t(S)?this.getBadActs(1):t(D)?this.getBadActs(2):t(O)?this.getBadActs(3):null},n}(),Je=function(n,e,t){return r(void 0,void 0,void 0,(function(){var n;return l(this,(function(r){var l;return t.locale(T,!0),l=t._globalConfig.locales,en.locales=l,n=e.prototype,Object.defineProperty(n,"theGods",{get:function(){if(this.cache.has("theGods")){var n=this.cache.get("theGods");if(n instanceof Ue)return n}var e=new Ue(this);return this.cache.set("theGods",e),e}}),[2]}))}))};return Je.TheGods=Ue,Je.God=Ie,Je}));
